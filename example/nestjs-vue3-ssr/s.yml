edition: 1.0.0
name: nestjs-ssr
access: "default"

vars: # 全局变量
  region: "cn-shanghai"
  service:
    name: "nestjs-ssr"

services:
  page:
    component: fc
    props:
      region: ${vars.region} # 关于变量的使用方法，可以参考：https://www.serverless-devs.com/serverless-devs/yaml#变量赋值
      service: ${vars.service}
      function:
        environmentVariables: # 环境变量
          NODE_ENV: 'production'
        name: "ssr"
        timeout: 30
        cpu: 4
        diskSize: 512
        memorySize: 4096
        instanceConcurrency: 10
        runtime: nodejs14
        codeUri: ./.serverless
        caPort: 3000
        customRuntimeConfig: # 自定义运行时启动配置
          command: # 启动指令，示例值: ["/code/myserver"]
            - node
            - dist/main.js
      triggers:                        # 触发器配置
        - name: httpTrigger            # 触发器名称
          type: http                   # 触发器类型
          config:                      # 触发器配置，包括OSS触发器, Log触发器, Log触发器, Timer触发器, Http触发器, MNS触发器, CDN触发器
            methods:                   # HTTP 触发器支持的访问方法，可选值：GET、POST、PUT、DELETE、HEAD
              - GET
              - POST